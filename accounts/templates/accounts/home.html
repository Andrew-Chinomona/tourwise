{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container mt-5">

  <!--  Unified Curved Search Bar (No Guests) -->
  <form method="get" action="#" class="bg-white shadow-sm rounded-pill px-3 py-2 mb-5">
    <div class="row align-items-center g-0 text-center text-md-start">

      <!-- Location -->
      <div class="col-md-4 px-3 border-end">
        <label class="form-label mb-0 fw-semibold small text-muted">Location</label>
        <select name="location" class="form-select border-0 p-0 bg-transparent">
          <option value="">Any Location</option>
          {% for loc in locations %}
            <option value="{{ loc.city }}|{{ loc.suburb }}">
              {{ loc.city }} - {{ loc.suburb }}
            </option>
          {% endfor %}
        </select>
      </div>

      <!-- Property Type -->
      <div class="col-md-4 px-3 border-end">
        <label class="form-label mb-0 fw-semibold small text-muted">Type</label>
        <select name="property_type" class="form-select border-0 p-0 bg-transparent">
          <option value="">All Types</option>
          <option value="house">House</option>
          <option value="apartment">Apartment</option>
          <option value="airbnb">Airbnb</option>
        </select>
      </div>

      <!-- Max Price -->
      <div class="col-md-3 px-3 border-end">
        <label class="form-label mb-0 fw-semibold small text-muted">Max Price</label>
        <input type="number" name="max_price" class="form-control border-0 p-0 bg-transparent" placeholder="e.g. 500">
      </div>

      <!-- Search Button -->
      <div class="col-md-1 text-end">
        <button type="submit" class="btn btn-dark rounded-circle">
          <i class="bi bi-search"></i>
        </button>
      </div>

    </div>
  </form>

  <!--  Recent Listings -->
  <h3>Recent Listings</h3>
  <div class="row">
    {% for property in recent_listings %}
      <div class="col-md-3 mb-4">
        <div class="card h-100 shadow-sm">
          <img src="{{ property.main_image.url }}" alt="{{ property.title }}" class="card-img-top rounded-top" style="height: 180px; object-fit: cover;">
          <div class="card-body">
            <h5 class="card-title">{{ property.title }}</h5>
            <p class="card-text">
              {{ property.street_address }}, {{ property.suburb }}, {{ property.city }}<br>
              <strong>${{ property.price }}</strong>
            </p>
          </div>
        </div>
      </div>
    {% empty %}
      <p>No recent listings available.</p>
    {% endfor %}
  </div>
  <div class="text-center mb-5">
    <a href="#" class="btn btn-outline-primary">Show More</a>
  </div>

  <!-- Featured Listings -->
  <h3>Featured Listings</h3>
  <div class="row">
    {% for property in featured_listings %}
      <div class="col-md-3 mb-4">
        <div class="card h-100 border-warning shadow-sm">
          <div style="height: 180px; background-size: cover; background-position: center; background-image: url('{{ property.main_image.url }}');"></div>
          <div class="card-body">
            <h5 class="card-title">{{ property.title }}</h5>
            <p class="card-text">
              {{ property.street_address }}, {{ property.suburb }}, {{ property.city }}<br>
              <strong>${{ property.price }}</strong>
            </p>
          </div>
        </div>
      </div>
    {% empty %}
      <p>No featured listings yet.</p>
    {% endfor %}
  </div>
  <div class="text-center mb-5">
    <a href="#" class="btn btn-outline-warning">Show More</a>
  </div>

</div>
{% endblock %}
